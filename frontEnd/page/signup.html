<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup</title>
    <link rel="stylesheet" href="../css/login.css">
    <!-- 추가함 -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- 추가함 -->
</head>
<body>
    <div class="container0">
        <div class="container1">
            <div class="logo">LINKee</div>
            <h2>Sign up to see photos and videos from your friends.</h2>
            <form action="http://127.0.0.1:8000/signup" method="post">
                <label for="">
                    <span class="labelText">ID</span>
                    <input type="text" name="user_id" aria-label="ID" aria-required="true">
                </label>
                <label for="">
                    <span class="labelText">Full Name</span>
                    <input type="text" name="user_name" aria-label="ID" aria-required="true">
                </label>
                <label for="">
                    <span class="labelText">Nickname</span>
                    <input type="text" id="nickname" name="nickname" aria-label="ID" aria-required="true">
                </label>
                <label for="">
                    <span class="labelText">Password</span>
                    <input type="password" name="user_pw" aria-label="ID" aria-required="true">
                </label>
                <p>People who use our service may have uploaded your contact information to Instagram. <span>Learn More</span></p>
                <button>Sign up</button>
            </form>
        </div>
        <div class="container2">
            <p>Have an account? <a href="./login.html">Login</a></p>
        </div>
    </div>
</body>
<script>
    document.querySelector("input[name='user_id']").addEventListener("input", async function(){
        let abc = document.querySelector("input[name='user_id']").value;
        const { data } = await axios.get(`http://127.0.0.1:8000/signup/idCheck/${abc}`, {
            withCredentials: true // 브라우저가 쿠키를 서버로 전달 할 수 있는 옵션
        });
        if(data == 0){
            document.querySelector(".container1 form label input").style.borderColor = "red";
        }else{
            document.querySelector(".container1 form label input").style.borderColor = "blue";
        }
    });
    document.querySelector("input[name='nickname']").addEventListener("input", async function(){
        let abc = document.querySelector("input[name='nickname']").value;
        const {data} = await axios.get(`http://127.0.0.1:8000/signup/nicknameCheck/${abc}`, {
            withCredentials: true // 브라우저가 쿠키를 서버로 전달 할 수 있는 옵션
        });
        if(data == 0){
            document.querySelector("#nickname").style.borderColor = "red";
        }else{
            document.querySelector("#nickname").style.borderColor = "blue";
        }
    });
</script>
</html>
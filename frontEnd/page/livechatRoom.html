<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>room</title>
    <script src="https://andybyungjoopark.com/socket.io/socket.io.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <link rel="stylesheet" href="../css/nav.css">
    <link rel="stylesheet" href="../css/livechatRoom.css">
</head>
<body>
    <!-- 실시간 알림창 -->
    <div id="live_chat_noti_wrap">
    </div>

    <!-- 대화 방에 들어와 있는 유저 정보 -->
    <div class="profile_img_wrap">
        <div class="user1_profile_img">
            <p>nickname</p>
            <img src="https://andybyungjoopark.com/user_img/default_profile.jpeg" alt="">
        </div>
        <div class="user2_profile_img">
            <img src="https://andybyungjoopark.com/user_img/default_profile.jpeg" alt="">
            <p>nickname</p>
        </div>
    </div>

    <!-- 대화 보여지는 부분 -->
    <div id="middle_body" class="middle_body">
        <div class="user1_chat_wrap">
            <p>asdfjsdkl;f;</p>
        </div>
        <div class="user2_chat_wrap">
            <p>믱머르게따ㅁ넝람ㄴ;어라ㅣㅁㄴ어리ㅏ;먼아ㅣ럼;ㅣ나얼;ㅣㅏㅁㄴ어라ㅣ;ㄴㅁ어리ㅏ;ㅓㅁㄴ;ㅣ아러ㅏㅣㅁ;ㄴ어ㅣㄹ;ㅓㅁㄴ;ㅏㅣ</p>
        </div>
        
    </div>
    <div class="input_wrap">
        <input class="chat_input" name="chat" type="text" placeholder="메시지 보내기...">
        <div class="chat_btn">전송</div>
    </div>


    <!-- 상단 nav -->
    <div class="top_nav_container">
        <div class="top_nav">
            <div class="logo"><img src="../nav_icon_img/icon_back.png" alt="" onclick="pageBack()"></div>
            <div>상대방의 닉네임</div>
        </div>
    </div>
</body>
<script>
    window.onload = async () => {
        try {
            const {data} = await axios.get('https://andybyungjoopark.com/chat/makeRoom', {
                withCredentials : true
            });



            // 모든 페이지에 다 들어갈 부분!!!
            const socket = io.connect('https://andybyungjoopark.com') // 소켓 연결 시도
            socket.emit("userIn", user.id); // 로그인 한 유저 아이디 보내기
  
            
        } catch (error) {
            console.log(error)
        }
    }

    function pageBack() {
        if(confirm("확인을 누르시면 현재 대화 방은 사라지고 이전 대화 내용은 확인할 수 없습니다. 방을 나가시겠습니까?") == true) {
            history.back();
        }else {
            return;
        }
    }
</script>
</html>